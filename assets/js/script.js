// Questions - Debut

const debutQuestions = [
    {
    "question": "And I was right there beside him all summer long",
    "answers": ["Picture to Burn", "Tim McGraw", "Cold As You", "Should Have Said No"],
    "correct": 1
    },

    {
    "question": "So watch me strike a match on all my wasted time",
    "answers": ["Picture to Burn", "Stay Beautiful", "Mary's Song (Oh My My My)", "Our Song"],
    "correct": 0
    },

    {
    "question": "The only thing that keeps me wishing on a wishing star",
    "answers": ["A Perfectly Good Heart", "Our Song", "Teardrops on My Guitar", "Should Have Said No"],
    "correct": 2
    },

        {
    "question": "I'm just walking, trying to see through the rain coming down",
    "answers": ["Place in this World", "Stay Beautiful", "Cold As You", "Picture to Burn"],
    "correct": 0
    },

    {
    "question": "Every smile you fake is so condescending, counting all the scars you made",
    "answers": ["Tim McGraw", "Invisible", "A Perfectly Good Heart", "Cold As You"],
    "correct": 3
    },

    {
    "question": "I know I didn't read between the lines",
    "answers": ["Stay Beautiful", "The Outside", "Mary's Song (Oh My My My)", "Tim McGraw"],
    "correct": 1
    },

    {
    "question": "But you don't tell anyone that you might not be the golden one",
    "answers": ["Our Song", "A Perfectly Good Heart", "Tied Together with a Smile", "Picture to Burn"],
    "correct": 2
    },

    {
    "question": "It's hard to make a conversation, when he's taking my breath away",
    "answers": ["Stay Beautiful", "Our Song", "The Outside", "Mary's Song (Oh My My My)"],
    "correct": 0
    },
    
    {
    "question": "You say that the past is the past",
    "answers": ["A Perfectly Good Heart", "Tim McGraw", "Tied Together with a Smile", "Should Have Said No"],
    "correct": 3
    },

    {
    "question": "Take me back to the house in the backyard tree",
    "answers": ["Should Have Said No", "Mary's Song (Oh My My My)", "The Outside", "Tim McGraw"],
    "correct": 1
    },

    {
    "question": "I've heard every album, listened to the radio",
    "answers": ["Our Song", "Picture to Burn", "Teardrops on My Guitar", "A Perfectly Good Heart"],
    "correct": 0
    },

    {
    "question": "And I don't try to hide my tears, my secrets or my deepest fears",
    "answers": ["Tim McGraw", "I'm Only Me When I'm With You", "The Outside", "Cold As You"],
    "correct": 1
    },

    {
    "question": "There's a fire inside of you that can't help but shine through",
    "answers": ["Picture to Burn", "Tied Together with a Smile", "Invisible", "Should Have Said No"],
    "correct": 2
    },

    {
    "question": "Why would you wanna make the very first scar",
    "answers": ["Our Song", "Tim McGraw", "Stay Beautiful", "A Perfectly Good Heart"],
    "correct": 3
    },

    {
    "question": "I hate that stupid old pickup truck you never let me drive",
    "answers": ["Picture to Burn", "Should Have Said No", "Mary's Song (Oh My My My)", "Invisible"],
    "correct": 0
    },

    {
    "question": "The water's high, you're jumping into it",
    "answers": ["Tim McGraw", "Tied Together with a Smile", "Cold As You", "Teardrops on My Guitar"],
    "correct": 1
    },

    {
    "question": "She said, I was seven and you were nine",
    "answers": ["Picture to Burn", "I'm Only Me When I'm With You", "Cold As You", "Mary's Song (Oh My My My)"],
    "correct": 3
    },

    {
    "question": "We could be a beautiful miracle, unbelievable",
    "answers": ["Our Song", "Should Have Said No", "Invisible", "Teardrops on My Guitar"],
    "correct": 2
    },

    {
    "question": "Maybe I should've seen the signs, should've read the writing on the wall",
    "answers": ["A Perfectly Good Heart", "Our Song", "The Outside", "Cold As You"],
    "correct": 0
    },

    {
    "question": "He said the way my blue eyes shined Put those Georgia stars to shame that night",
    "answers": ["Invisible", "Tim McGraw", "Tied Together with a Smile", "Picture to Burn"],
    "correct": 1
    },


];

const fearlessQuestions = [
    {
    "question": "You take my hand and drag me head first",
    "answers": ["Fifteen", "Breathe", "Fearless", "Love Story"],
    "correct": 2
    },

    {
    "question": "And you're dancing 'round your room when the night ends",
    "answers": ["The Way I Loved You", "The Best Day", "Change", "Fifteen"],
    "correct": 3
    },

    {
    "question": "You'll be the prince and I'll be the princess",
    "answers": ["Love Story", "White Horse", "Breathe", "Untouchable"],
    "correct": 0
    },

    {
    "question": "I could give you 50 reasons why I should be the one you choose",
    "answers": ["Change", "Hey Stephen", "Jump Then Fall", "You're Not Sorry"],
    "correct": 1
    },

    {
    "question": "This ain't Hollywood, this is a small town",
    "answers": ["White Horse", "The Way I Loved You", "Love Story", "Fifteen"],
    "correct": 0
    },

    {
    "question": "And you've got a smile that can light up this whole town",
    "answers": ["Breathe", "You Belong With Me", "White Horse", "Change"],
    "correct": 1
    },

    {
    "question": "Every little bump in the road I tried to swerve",
    "answers": ["The Way I Loved You", "Hey Stephen", "Breathe", "The Best Day"],
    "correct": 2
    },

    {
    "question": "Why do you have to put down my dreams so you're the only thing on my mind?",
    "answers": ["Change", "Tell Me Why", "The Other Side of the Door", "Come in with the Rain"],
    "correct": 1
    },

    {
    "question": "You used to shine so bright but I watched all of it fade ",
    "answers": ["You're Not Sorry", "Tell Me Why", "The Other Side of the Door", "Come in with the Rain"],
    "correct": 0
    },

    {
    "question": "You used to shine so bright but I watched all of it fade ",
    "answers": ["You're Not Sorry", "Tell Me Why", "The Other Side of the Door", "Come in with the Rain"],
    "correct": 0
    },

    {
    "question": "You're so in love that you act insane",
    "answers": ["Fearless", "White Horse", "Change", "The Way I Loved You"],
    "correct": 3
    },

    {
    "question": "Here's to silence, that cuts me to the core",
    "answers": ["Love Story", "Breathe", "Forever & Always", "Jump then Fall"],
    "correct": 2
    },

    {
    "question": "It's the age of princesses and pirate ships",
    "answers": ["The Best Day", "Untouchable", "Superstar", "The Other Side of the Door"],
    "correct": 0
    },

    {
    "question": "These walls that they put up to hold us back will fall down",
    "answers": ["Jump then Fall", "Come in with the Rain", "Change", "Today was a Fairytale"],
    "correct": 2
    },

    {
    "question": "The bottom's gonna drop out from under our feet",
    "answers": ["Today was a Fairytale", "Jump then Fall", "Superstar", "Love Story"],
    "correct": 1
    },

    {
    "question": "And now that you're close I feel like coming undone",
    "answers": ["Untouchable", "Breathe", "Fifteen", "White Horse"],
    "correct": 0
    },

    {
    "question": "I could stand up and sing you a song but I don't wanna have to go that far",
    "answers": ["The Best Day", "Come in with the Rain", "Forever & Always", "You're Not Sorry"],
    "correct": 1
    },

    {
    "question": "So dim that spotlight, tell me things like `I can't take my eyes off of you`",
    "answers": ["Jump Then Fall", "Untouchable", "You Belong With Me", "Superstar"],
    "correct": 3
    },

    {
    "question": "After everything and that little black dress",
    "answers": ["The Other Side of the Door", "Forever & Always", "Fifteen", "Hey Stephen"],
    "correct": 0
    },
];

const speakNowQuestions = [

    {
    "question": "You learn my secrets and you figure out why I'm guarded",
    "answers": ["Never Grow Up", "Mine", "Love Story", "Enchanted"],
    "correct": 1
    },

    {
    "question": "Get me with those green eyes, baby",
    "answers": ["Better than Revenge", "Haunted", "Mean", "Sparks Fly"],
    "correct": 3
    },

    {
    "question": "You gave me all your love and all I gave you was goodbye",
    "answers": ["Back to December", "The Story of Us", "Mine", "Speak Now"],
    "correct": 0
    },

    {
    "question": "Horrified looks from everyone in the room, but I'm only looking at you",
    "answers": ["Innocent", "Speak Now", "Mean", "Long Live"],
    "correct": 1
    },

    {
    "question": "And you'll add my name to your long list of traitors",
    "answers": ["Ours", "Superman", "Dear John", "Better than Revenge"],
    "correct": 2
    },

    {
    "question": "I bet you got pushed around, somebody made you cold",
    "answers": ["Mean", "Innocent", "Enchanted", "Speak Now"],
    "correct": 0
    },

    {
    "question": "But you held your pride like you should have held me",
    "answers": ["Long Live", "Ours", "The Story of Us", "Love Story"],
    "correct": 2
    },

    {
    "question": "Remember the footsteps, remember the words said",
    "answers": ["Better than Revenge", "Never Grow Up", "Sparks Fly", "Mean"],
    "correct": 1
    },

    {
    "question": "The lingering question kept me up 2 AM, who do you love?",
    "answers": ["Enchanted", "Innocent", "Love Story", "Haunted"],
    "correct": 0
    },

    {
    "question": "I think her ever present frown is a little troubling",
    "answers": ["Ours", "Mean", "Better than Revenge", "Dear John"],
    "correct": 2
    },

    {
    "question": "Your string of lights is still bright to me"
    "answers": ["The Story of Us", "Sparks Fly", "Love Story", "Innocent"],
    "correct": 3
    },

    {
    "question": "Stood there and watched you walk away from everything we had"
    "answers": ["Long Live", "Haunted", "Dear John", "Enchanted"],
    "correct": 1
    },

    {
    "question": "And I hope the sun shines and it's a beautiful day and something reminds you you wish you had stayed "
    "answers": ["Ours", "If This was a Movie", "Sparks Fly", "Last Kiss"],
    "correct": 3
    },

    {
    "question": "You traded your baseball cap for a crown"
    "answers": ["Superman", "Long Live", "The Story of Us", "Mean"],
    "correct": 1
    },

    {
    "question": "The stakes are high, the water's rough"
    "answers": ["Ours", "Love Story", "Innocent", "Back to December"],
    "correct": 0
    },

    {
    "question": "Now I'm pacing down the hall, chasing down your street"
    "answers": ["Speak Now", "Never Grow Up", "Haunted", "If This was a  Movie"],
    "correct": 3
    },

     {
    "question": "But I hope someday you'll take me away, and save the day"
    "answers": ["Enchanted", "Ours", "Superman", "Better than Revenge"],
    "correct": 2
    },
]

const allErasQuestions = {
    debut: debutQuestions,
    fearless: fearlessQuestions,
    speakNow: speakNowQuestions,
};

// General Code for the DOM
const eras = document.getElementById ("pick-era");
const quizSpace = document.getElementById ("quiz-space");
const questionEl = document.getElementById ("question");
const answers = document.getElementById ("answer-space");
const nextQuestion = document.getElementById ("next-question");
const scoreEl = document.getElementById ("score");

let currentQuestionIndex = 0;
let currentQuestions = [];

// Show sections as required
function showSection(id) {
    document.getElementById(id).classList.remove("dissapear");
}

function hideSection (id) {
    document.getElementById(id).classList.add("dissapear");
}

// Show opening instructions
document.getElementById ("start-button").addEventListener ("click", () => {
    showSection("opening-instructions");
    hideSection ("one-liner");
    hideSection("start-button");
});

// show Era selector

document.getElementById ("pick-button").addEventListener ("click", () => {
    showSection("pick-era");
    hideSection("opening-instructions");
});

// select Era then open quiz
let eraButtons = document.getElementsByClassName ("era-selector-button");

for (let button of eraButtons) {
    button.addEventListener("click", function() {
        let gameChoice = this.getAttribute ("data-type");
        console.log("Clicked era", gameChoice);

        if (allErasQuestions[gameChoice]) {
            console.log ("Loading questions for", gameChoice);
            hideSection ("pick-era");
            showSection ("quiz-space");
            showSection ("additional-buttons");
            revealEra(gameChoice);
            startQuiz (allErasQuestions [gameChoice]);
        } else {
            console.log ("No game questions found for", gameChoice)
        }
    });
}

// Format Era titles for readability at top of page
function formatEraName(era) {
  const eraNames = {
    debut: "Debut",
    fearless: "Fearless",
    speakNow: "Speak Now",
    red: "Red",
    nineteeneightynine: "1989",
    reputation: "Reputation",
    lover: "Lover",
    folklore: "Folklore",
    evermore: "Evermore",
    midnights: "Midnights",
    ttpd: "The Tortured Poets Department",
    ttpdAnthology: "TTPD - The Anthology"
  };
  return eraNames [era];
}
  
  function revealEra (era) {
    eraEl.innerText = formatEraName(era);
    }

// Show correct Era at top of quiz
const eraEl = document.getElementById("show");

// shuffle questions
function shuffleArray(array) {
    return [...array].sort(() => Math.random() - 0.5);
}

// Quiz Logic - load and shuffle questions to only show 15)
function startQuiz (questionsArray){
    currentQuestions = shuffleArray(questionsArray).slice(0, 15);
    currentQuestionIndex = 0;
    showQuestion (currentQuestions[currentQuestionIndex]);
}

// Show Question and answers
const answerButtons = [
    document.querySelector(".answer1"),
    document.querySelector(".answer2"),
    document.querySelector(".answer3"),
    document.querySelector(".answer4")
]
function showQuestion (quest) {
    questionEl.innerText = quest.question;

    // Enable button on each individual question
    quest.answers.forEach((answer, index) => {
        const btn = answerButtons [index];
        btn.disabled = false;
        btn.classList.remove("correct-answer", "wrong-answer");
        btn.innerText = answer;

        btn.onclick = () => {
            showAnswer (btn, index === quest.correct);
        };
    });
}

function showAnswer (button, isCorrect) {
    // Update score if correct
    if (isCorrect) {
        score++;
        scoreEl.innerText = `${score} / 15`;
    }

    // Disable buttons so player cannot choose another and show colour highlight
    answerButtons.forEach((btn, index) => {
        btn.disabled = true;

      // Change colour to indicate if correct or incorrect answer
    if (index === currentQuestions [currentQuestionIndex].correct) {
        btn.classList.add("correct-answer");
    }    

    if (btn === button && !isCorrect) {
        btn.classList.add("wrong-answer");
    }
});

    // Jump to next question automatically after 1.5 seconds
    currentQuestionIndex++;
    if (currentQuestionIndex < currentQuestions.length) {
        setTimeout(() => {
            showQuestion(currentQuestions[currentQuestionIndex]);
        }, 1500);
    }
}

// Score tracker
let score = 0